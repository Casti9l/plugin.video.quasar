import pyxbmct.addonwindow as pyxbmct

class DialogSelect(pyxbmct.AddonDialogWindow):

    def __init__(self, title='', items=None, callback=None):
        super(DialogSelect, self).__init__(title)

        self.setGeometry(900, 600, rows_=len(items), columns_=1)

        self.list = pyxbmct.List(_itemHeight=64, _space=4, _itemTextXOffset=0, _itemTextYOffset=-2)
        self.placeControl(self.list, row=0, column=0, rowspan=len(items), columnspan=1, pad_x=0, pad_y=0)
        self.list.addItems(items)

        if callback:
            self.connect(self.list, lambda: callback(self.list.getSelectedPosition()))

        self.setFocus(self.list)

        self.connect(pyxbmct.ACTION_NAV_BACK, self.close)

    def setAnimation(self, control):
        control.setAnimations([('WindowOpen', 'effect=fade start=0 end=100 time=500',),
                               ('WindowClose', 'effect=fade start=100 end=0 time=500',)])
